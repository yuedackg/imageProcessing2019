(window._ambjs=window._ambjs||[]).push([[22],{2230:function(e,t,a){"use strict";a.d(t,"a",function(){return x});var s,n=a(15),i=a(17),o=a(16),d=a(52),r=a(13),p=a(18),u=a(1),l=a.n(u),c=a(5),m=a.n(c),b=a(46),h=a.n(b),g=a(31),f=a.n(g),v=a(12),I=a.n(v),y=a(87),w=a.n(y),j=a(67),T=a.n(j),O=a(76),P=a.n(O),R=a(187),S=a.n(R),z=a(516),N=a.n(z),k=a(1195),D=a(109),E=a(19),_=a(332),A=a(269),q=a(1199);Object(k.a)();var x=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(i.a)(this,Object(o.a)(t).call(this,e))).handleSlotRenderEnded=a.handleSlotRenderEnded.bind(Object(d.a)(a)),a.update=a.update.bind(Object(d.a)(a)),a.removeSlot=a.removeSlot.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(r.a)(t,null,[{key:"defaultProps",get:function(){return{className:null,criteoZoneId:0,targetingParams:null,prebidParams:{rubicon:{siteId:"",zoneId:""},yieldone:{placementId:""},pubmatic:{adSlot:""},openx:{unit:""},onedisplay:{placement:""},appnexus:{placementId:""},adGeneration:{id:""},microad:{spot:""}},shouldRequestAmazon:!0}}}]),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;P()(this.props.slotName)&&this.props.slotName&&(this.initialized||function(e){var t=!!s;s||(window.googletag=window.googletag||{},(s=window.googletag).cmd=s.cmd||[]),s.cmd.push(function(){s.pubads().addEventListener("slotRenderEnded",function(t){S()(e)&&e(t)})}),t||(s.cmd.push(function(){var e=h.a.parse(document.cookie),t=e.aid||"",a=e.uid||"",n=e.sid||"",i=a||t||null,o=e.g||"",d=e.a||"",r=e.RS_UID||"",p=e.P||"";"optout"!==i&&(i&&s.pubads().setPublisherProvidedId(i),o&&s.pubads().setTargeting("g",o),d&&s.pubads().setTargeting("a",d),t&&s.pubads().setTargeting("aid",t),a&&s.pubads().setTargeting("deca_user_id",a),r&&s.pubads().setTargeting("rsuid",r),p&&s.pubads().setTargeting("lance",p),n&&(n=n.split(",").join("|"),s.pubads().setTargeting("sid",n))),s.pubads().enableAsyncRendering(),s.pubads().collapseEmptyDivs(),s.pubads().disableInitialLoad(),s.enableServices()}),Object(D.a)("//securepubads.g.doubleclick.net/tag/js/gpt.js"))}(this.handleSlotRenderEnded),s.cmd.push(function(){e.initialized=!0,e.props.slotName&&e.update(e.props)}))}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||this.props.criteoZoneId!==e.criteoZoneId||this.props.shouldRequestAmazon!==e.shouldRequestAmazon||this.props.slotId!==e.slotId||this.props.slotName!==e.slotName||!w()(this.props.prebidParams,e.prebidParams)||!w()(this.props.sizeRule,e.sizeRule)||!w()(this.props.targetingParams,e.targetingParams)}},{key:"componentDidUpdate",value:function(){var e=this;P()(this.props.slotName)&&this.props.slotName&&s.cmd.push(function(){e.update(e.props)})}},{key:"componentWillUnmount",value:function(){this.removeSlot()}},{key:"handleSlotRenderEnded",value:function(e){w()(this.slot,e.slot)&&!e.isEmpty&&this.props.className&&this.dfp&&this.dfp.setAttribute("class",this.props.className)}},{key:"update",value:function(){var e=this.props,t=e.criteoZoneId,a=e.prebidParams,n=e.shouldRequestAmazon,i=e.sizeRule,o=e.slotName,d=e.slotId,r=e.targetingParams;if(this.initialized&&(this.slot&&this.removeSlot(),P()(o)&&o&&this.dfp)){var p=d;this.dfp.setAttribute("id",p),this.slot=s.defineSlot("/".concat(window.process.env.DFP_NETWORK_CODE,"/").concat(o),i,p);var u=this.slot;u&&u.addService(s.pubads()),T()(r)&&!I()(r)&&Object.keys(r).forEach(function(e){var t=r[e];f()(t)&&s.pubads().setTargeting(e,t),s.pubads().setTargeting(e,N()(t))}),s.pubads().setTargeting("ad_group",Object(E.e)()),s.pubads().setTargeting("ad_h",(new Date).getUTCHours().toString()),s.pubads().setTargeting("bucket",N()(Math.floor(10*Math.random())));var l=new Promise(function(e){n?(Object(_.b)({slots:[{slotID:p,slotName:"/".concat(window.process.env.DFP_NETWORK_CODE,"/").concat(o),sizes:i}],timeout:1500},function(){s.cmd.push(function(){window.apstag.setDisplayBids(),e()})}),setTimeout(function(){e()},1500)):e()}),c=new Promise(function(e){var t=a.rubicon||{},n={};t.siteId&&t.zoneId&&(n={bidder:"rubicon",params:{accountId:"12364",siteId:t.siteId,zoneId:t.zoneId}});var o=a.yieldone||{},d={};o.placementId&&(d={bidder:"yieldone",params:{placementId:o.placementId}});var r=a.pubmatic||{},u={};r.adSlot&&(u={bidder:"pubmatic",params:{publisherId:"157520",adSlot:r.adSlot}});var l=a.openx||{},c={};l.unit&&(c={bidder:"openx",params:{delDomain:"cyberagent-usd-d.openx.net",unit:l.unit}});var m=a.onedisplay||{},b={};m.placement&&(b={bidder:"onedisplay",params:{network:"15053.1",placement:m.placement,region:"as"}});var h=a.appnexus||{},g={};h.placementId&&(g={bidder:"appnexus",params:{placementId:h.placementId}});var f=a.adGeneration||{},v={};f.id&&(v={bidder:"adg",params:{id:f.id}});var y=a.microad||{},w={};y.spot&&(w={bidder:"microad",params:{spot:y.spot}});var j=[n,d,u,c,b,g,v,w].filter(function(e){return!I()(e)});j.length<1?e():(Object(q.a)(p,[{code:p,mediaTypes:{banner:{sizes:Object(E.b)(i)}},bids:j}],function(){s.cmd.push(function(){window.pbjs.que.push(function(){window.pbjs.setTargetingForGPTAsync([p]),e()})})},1500),setTimeout(function(){e()},1500))}),m=new Promise(function(e){t?(Object(A.b)({placements:[{slotid:p,zoneid:t}]},function(){s.cmd.push(function(){window.Criteo.SetDFPKeyValueTargeting(),e()})},1500),setTimeout(function(){e()},1500)):e()});Promise.all([l,c,m]).then(function(){s.cmd.push(function(){s.display(p),s.pubads().refresh([u])})})}}},{key:"removeSlot",value:function(){this.slot&&(s.destroySlots([this.slot]),this.slot=null,this.dfp&&(this.dfp.innerHTML=null,this.dfp.removeAttribute("className")))}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{ref:function(t){e.dfp=t}})}}]),t}(m.a.Component);x.displayName="PcDfpBlock",x.propTypes={className:l.a.string,criteoZoneId:l.a.number,prebidParams:l.a.shape({rubicon:l.a.shape({siteId:l.a.string,zoneId:l.a.string}),yieldone:l.a.shape({placementId:l.a.string}),pubmatic:l.a.shape({adSlot:l.a.string}),openx:l.a.shape({unit:l.a.string}),onedisplay:l.a.shape({placement:l.a.string}),appnexus:l.a.shape({placementId:l.a.string}),adGeneration:l.a.shape({id:l.a.string}),microad:l.a.shape({spot:l.a.string})}),shouldRequestAmazon:l.a.bool,sizeRule:l.a.arrayOf(l.a.arrayOf(l.a.number)).isRequired,slotId:l.a.string.isRequired,slotName:l.a.string.isRequired,targetingParams:l.a.object}}}]);
//# sourceMappingURL=22.js.map